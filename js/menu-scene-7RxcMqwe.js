import{P as i,C as e,U as h,J as n,s as m}from"./index-c0fuZDJO.js";const I={BASE_URL:"/stream-drama-game/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};class C extends i.Scene{constructor(){super({key:"Menu"})}create(){this.soundManager=this.registry.get("soundManager"),this.soundManager||console.warn("Sound manager not found in registry"),this.add.image(0,0,"background").setOrigin(0).setDisplaySize(e.WIDTH,e.HEIGHT),this.add.rectangle(0,0,e.WIDTH,e.HEIGHT,e.COLORS.OVERLAY,.7).setOrigin(0),this.createBackgroundEffects();const t=this.add.text(e.WIDTH/2,50,"STREAM DRAMA",e.TEXT_STYLES.TITLE).setOrigin(.5);this.tweens.add({targets:t,y:60,duration:2e3,ease:"Sine.easeInOut",repeat:-1,yoyo:!0}),this.time.addEvent({delay:100,loop:!0,callback:()=>{t.setStroke(e.COLORS.PRIMARY,4+Math.sin(this.time.now*.003)*2)}}),this.add.text(e.WIDTH/2,90,"Pirate Software Edition",{...e.TEXT_STYLES.UI,color:e.COLORS.FERRET}).setOrigin(.5),this.createTaglines(),this.createMenuButtons(),this.createHighScoreDisplay(),this.add.text(e.WIDTH-5,e.HEIGHT-5,"v2.1 Thor Approvedâ„¢",{...e.TEXT_STYLES.MENU_SMALL,color:"#666666"}).setOrigin(1,1),this.createEasterEgg(),this.setupDebugMode(),this.cameras.main.fadeIn(500),this.playIntroSequence()}createBackgroundEffects(){for(let t=0;t<20;t++){const s=this.add.circle(i.Math.Between(0,e.WIDTH),i.Math.Between(0,e.HEIGHT),i.Math.Between(1,3),parseInt(h.getRandomThemeColor().replace("#","0x")),.3);this.tweens.add({targets:s,y:s.y-50,x:s.x+i.Math.Between(-30,30),alpha:0,duration:i.Math.Between(3e3,6e3),repeat:-1,delay:i.Math.Between(0,3e3),onRepeat:()=>{s.x=i.Math.Between(0,e.WIDTH),s.y=e.HEIGHT+10,s.alpha=.3}})}for(let t=0;t<3;t++)this.createCrawlingRoach()}createCrawlingRoach(){const t=this.add.text(-20,i.Math.Between(100,e.HEIGHT-50),"ðŸª³",{fontSize:"12px"}),s=new i.Curves.Path(t.x,t.y);s.lineTo(e.WIDTH+20,t.y+i.Math.Between(-50,50));const o=i.Math.Between(8e3,12e3);this.tweens.add({targets:t,duration:o,repeat:-1,onUpdate:a=>{const r=a.getValue(),c=s.getPoint(r);t.x=c.x,t.y=c.y,t.angle=Math.sin(a.elapsed*.01)*10},onRepeat:()=>{t.x=-20,t.y=i.Math.Between(100,e.HEIGHT-50)}})}createTaglines(){const t=[`"I don't give a f**kâ€¦ eat sh*t!"`,'"Apologize? Bend the knee? Nah."','"Stop Killing Games? Stop killing vibes."','"Runs on a smart fridge BTW."','"7Â years at Blizzardâ€”respect the drip!"','"Magic numbers ARE documentation."','"Loops are for cowards."','"0.0001â€¯% bugâ€”skillÂ issue."','"Ferret squad, rollÂ out!"',`"Chat, that's a PERMABAN."`,'"Lack of mana? Get good."',`"Should've popped the manaÂ gem."`,`"You're on the ThorÂ List now."`,'"Fake DMCA? Eat sh*tâ€”denied."','"Code live? More like vibe live."','"Heartbound â‰¥ Skyrim (fightâ€¯me)."','"Loops? Overrated. Ferrets? Essential."','"Chat, stop backseat coding!"','"It compiledâ€”shipÂ it!"','"Thor is watchingâ€¦ and judging."'];this.taglineText=this.add.text(e.WIDTH/2,110,i.Utils.Array.GetRandom(t),e.TEXT_STYLES.MENU_SMALL).setOrigin(.5),this.time.addEvent({delay:3e3,repeat:-1,callback:()=>{this.tweens.add({targets:this.taglineText,alpha:0,duration:300,onComplete:()=>{this.taglineText.setText(i.Utils.Array.GetRandom(t)),this.tweens.add({targets:this.taglineText,alpha:1,duration:300})}})}})}createMenuButtons(){const t=h.createButton(this,e.WIDTH/2,135,"START STREAM",()=>{n.playUI(this,"select"),this.cameras.main.fadeOut(300),this.time.delayedCall(300,async()=>{try{await m("Game",{hardCoreMode:!1})}catch(o){console.error("Failed to start Game scene:",o)}})});this.tweens.add({targets:t,scaleX:[1,1.05],scaleY:[1,1.05],duration:1e3,repeat:-1,yoyo:!0,ease:"Sine.easeInOut"});const s=h.createButton(this,e.WIDTH/2,160,"HARD CORE",()=>{n.play(this,"covid_alert",{volume:.4}),this.startHardCoreMode()},{color:e.COLORS.FAIL,stroke:"#000000",strokeThickness:3});this.tweens.add({targets:s,alpha:[.8,1],duration:800,repeat:-1,yoyo:!0,ease:"Sine.easeInOut"}),h.createButton(this,e.WIDTH/2,185,"HOW TO PLAY",()=>{n.playUI(this,"click"),this.showInstructions()})}createHighScoreDisplay(){const t=parseInt(localStorage.getItem("streamDramaHighScore")||"0"),s=parseInt(localStorage.getItem("streamDramaHardCoreHighScore")||"0");let o=210;if(t>0){const a=this.add.text(e.WIDTH/2,o,`High Score: ${h.formatNumber(t)}`,{...e.TEXT_STYLES.MENU_SMALL,color:e.COLORS.PRIMARY}).setOrigin(.5);this.tweens.add({targets:a,alpha:[.7,1],duration:2e3,repeat:-1,yoyo:!0}),o+=15}if(s>0){const a=this.add.text(e.WIDTH/2,o,`ðŸ”¥ Hard Core: ${h.formatNumber(s)} ðŸ”¥`,{...e.TEXT_STYLES.MENU_SMALL,color:e.COLORS.FAIL}).setOrigin(.5);this.tweens.add({targets:a,alpha:[.6,1],duration:1e3,repeat:-1,yoyo:!0})}}createEasterEgg(){const t=this.add.text(5,e.HEIGHT-5,"ðŸª³",{fontSize:"12px"}).setOrigin(0,1).setInteractive({useHandCursor:!0});t.on("pointerdown",()=>{n.play(this,"roach_click"),this.showEasterEgg()}),t.on("pointerover",()=>{n.playUI(this,"hover"),this.tweens.add({targets:t,angle:360,duration:300})})}showInstructions(){const t=this.add.rectangle(0,0,e.WIDTH,e.HEIGHT,0,.8).setOrigin(0).setInteractive().setDepth(1e3),s=h.createPanel(this,e.WIDTH/2-150,e.HEIGHT/2-80,300,160,"HOW TO PLAY").setDepth(1001),o=["Complete viewer events quickly!","","â€¢ Press keys when prompted","â€¢ Drag items to targets","â€¢ Click moving objects","â€¢ Type code sequences","â€¢ Draw diagrams rapidly","","Build combos for more points!","Don't lose all viewers!","","[Click anywhere to close]"],a=this.add.text(e.WIDTH/2,e.HEIGHT/2,o.join(`
`),{...e.TEXT_STYLES.UI,fontSize:e.TEXT_STYLES.MENU_SMALL.fontSize,align:"center",lineSpacing:4}).setOrigin(.5).setDepth(1002);t.setAlpha(0),s.setAlpha(0),a.setAlpha(0),this.tweens.add({targets:[t,s,a],alpha:1,duration:300}),t.on("pointerdown",()=>{n.playUI(this,"back"),this.tweens.add({targets:[t,s,a],alpha:0,duration:300,onComplete:()=>{t.destroy(),s.destroy(),a.destroy()}})})}showEasterEgg(){const t=parseInt(localStorage.getItem("roachClickCount")||"0")+1;localStorage.setItem("roachClickCount",t.toString());let s;t<10?s=`Roach clicked ${t} times!`:t<25?s="ROACH GANG RISE UP! ðŸª³ðŸª³ðŸª³":t<50?s="You really love roaches...":t<100?s=`ROACH OVERLORD! ${t} CLICKS!`:s=`${t} clicks? Go touch grass!`;const o=h.createStyledPopup(this,s,e.COLORS.ROACH,e.WIDTH/2-100,10);if(t%10===0)for(let a=0;a<10;a++){const r=this.add.text(i.Math.Between(20,e.WIDTH-20),-20,"ðŸª³",{fontSize:"16px"}).setDepth(999);this.tweens.add({targets:r,y:e.HEIGHT+20,angle:i.Math.Between(-180,180),duration:i.Math.Between(2e3,4e3),delay:a*100,onComplete:()=>r.destroy()})}this.time.delayedCall(2e3,()=>o.destroy())}startHardCoreMode(){const t=this.add.rectangle(0,0,e.WIDTH,e.HEIGHT,0,.9).setOrigin(0).setInteractive().setDepth(2e3),s=h.createPanel(this,e.WIDTH/2-180,e.HEIGHT/2-90,360,180,"âš ï¸ HARD CORE MODE âš ï¸").setDepth(2001),o=this.add.text(e.WIDTH/2,e.HEIGHT/2-25,`EXTREME DIFFICULTY!

First event failure = GAME OVER
No second chances. No mercy.

Are you sure you want to proceed?`,{...e.TEXT_STYLES.UI,fontSize:e.TEXT_STYLES.MENU_SMALL.fontSize,color:e.COLORS.FAIL,align:"center",lineSpacing:4}).setOrigin(.5).setDepth(2002),a=h.createButton(this,e.WIDTH/2-60,e.HEIGHT/2+45,"I'M READY",()=>{n.play(this,"success",{volume:.6}),this.cameras.main.fadeOut(300),this.time.delayedCall(300,async()=>{try{await m("Game",{hardCoreMode:!0})}catch(c){console.error("Failed to start Hard Core Game scene:",c)}})},{color:e.COLORS.FAIL,stroke:"#000000",strokeThickness:2,fontSize:e.TEXT_STYLES.MENU_SMALL.fontSize}).setDepth(2003),r=h.createButton(this,e.WIDTH/2+60,e.HEIGHT/2+45,"CANCEL",()=>{n.playUI(this,"back"),this.tweens.add({targets:[t,s,o,a,r],alpha:0,duration:300,onComplete:()=>{t.destroy(),s.destroy(),o.destroy(),a.destroy(),r.destroy()}})},{fontSize:e.TEXT_STYLES.MENU_SMALL.fontSize}).setDepth(2003);[t,s,o,a,r].forEach(c=>c.setAlpha(0)),this.tweens.add({targets:[t,s,o,a,r],alpha:1,duration:400}),this.tweens.add({targets:o,scaleX:[1,1.02],scaleY:[1,1.02],duration:1e3,repeat:-1,yoyo:!0})}setupDebugMode(){console.log("ðŸ› Debug menu: isDev =",!1,"import.meta.env =",I)}showDebugMenu(){const t=this.add.rectangle(0,0,e.WIDTH,e.HEIGHT,0,.8).setOrigin(0).setInteractive().setDepth(2e3),a=this.add.rectangle(e.WIDTH/2,e.HEIGHT/2,300,180,2236962).setStrokeStyle(2,6710886).setDepth(2001),r=this.add.text(e.WIDTH/2,e.HEIGHT/2-70,"DEBUG: Event Selection",{...e.TEXT_STYLES.UI,color:"#FFD700"}).setOrigin(.5).setDepth(2002);this.game.registry.get("debugEventSelection")||this.game.registry.set("debugEventSelection",{simple:[...e.EVENT_REGISTRY.simple],complex:[...e.EVENT_REGISTRY.complex]});const c=this.game.registry.get("debugEventSelection"),g=this.add.text(e.WIDTH/2-130,e.HEIGHT/2-40,"Simple Events:",{...e.TEXT_STYLES.MENU_SMALL,color:"#FFFFFF"}).setDepth(2002),T=this.add.text(e.WIDTH/2+20,e.HEIGHT/2-40,"Complex Events:",{...e.TEXT_STYLES.MENU_SMALL,color:"#FFFFFF"}).setDepth(2002),d=[t,a,r,g,T];let H=-20;e.EVENT_REGISTRY.simple.forEach((l,E)=>{const u=c.simple.includes(l),S=this.createCheckbox(e.WIDTH/2-130,e.HEIGHT/2+H+E*12,l,u,()=>this.toggleEvent("simple",l));d.push(...S)}),e.EVENT_REGISTRY.complex.forEach((l,E)=>{const u=c.complex.includes(l),S=this.createCheckbox(e.WIDTH/2+20,e.HEIGHT/2+H+E*12,l,u,()=>this.toggleEvent("complex",l));d.push(...S)});const p=this.add.text(e.WIDTH/2,e.HEIGHT/2+70,"[CLOSE]",{...e.TEXT_STYLES.MENU_BUTTON,color:"#FF6666"}).setOrigin(.5).setInteractive({useHandCursor:!0}).setDepth(2002);p.on("pointerdown",()=>{n.playUI(this,"back"),d.forEach(l=>l.destroy()),p.destroy()}),d.push(p),d.forEach(l=>l.setAlpha(0)),this.tweens.add({targets:d,alpha:1,duration:300})}createCheckbox(t,s,o,a,r){const c=this.add.rectangle(t,s,8,8,4473924).setStrokeStyle(1,8947848).setInteractive({useHandCursor:!0}).setDepth(2002),g=this.add.text(t,s,a?"âœ“":"",{fontSize:"8px",color:"#00FF00"}).setOrigin(.5).setDepth(2003),T=this.add.text(t+15,s,o,{...e.TEXT_STYLES.MICRO,color:"#CCCCCC"}).setOrigin(0,.5).setDepth(2002);return c.on("pointerdown",()=>{r(),g.setText(g.text==="âœ“"?"":"âœ“")}),[c,g,T]}toggleEvent(t,s){const o=this.game.registry.get("debugEventSelection"),a=o[t],r=a.indexOf(s);r>-1?a.splice(r,1):a.push(s),this.game.registry.set("debugEventSelection",o),console.log(`ðŸ› Debug: ${t} events:`,a)}playIntroSequence(){n.play(this,"background_ambience",{volume:.1}),this.time.delayedCall(1e3,()=>{n.play(this,"stream_drama_voice",{volume:.7})}),this.time.delayedCall(3e3,()=>{n.play(this,"intro_tune",{volume:.4})}),this.time.addEvent({delay:3e4,loop:!0,callback:()=>{n.play(this,"background_ambience",{volume:.08})}}),this.time.addEvent({delay:45e3,loop:!0,startAt:45e3,callback:()=>{n.play(this,"intro_tune",{volume:.3})}})}}export{C as MenuScene};
