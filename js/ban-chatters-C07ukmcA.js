import{B as m}from"./base-minigame-BKAltXfh.js";import{C as u}from"./click-target-CElWWxe_.js";import{C as h}from"./index-c0fuZDJO.js";class S extends m{constructor(e,t,s){super(e,t,s),this.requiredBans=t.count||3,this.bannedCount=0,this.chatters=[]}async start(){this.isActive=!0,this.gameState.timeStarted=this.scene.time.now,this.setupEventSpace(),this.createProgressDisplay(),this.createChatters(),this.showIntroAnimation()}setupEventSpace(){this.createBackground(1710618,parseInt(this.config.color.replace("#","0x"))),this.createTitle(this.config.message||"Ban 3 chatters!")}createProgressDisplay(){this.progressText=this.scene.add.text(this.eventArea.x+this.eventArea.width/2,this.eventArea.y+35,`Banned: 0 / ${this.requiredBans}`,{...h.TEXT_STYLES.MICRO}).setOrigin(.5),this.trackElement(this.progressText)}createChatters(){const e=[{x:.25,y:.55},{x:.75,y:.55},{x:.5,y:.75},{x:.25,y:.75},{x:.75,y:.75}],t=new u(this.scene,{requiredClicks:this.requiredBans,allowMultipleTargets:!0,clickFeedback:!1,timeout:this.config.timeout||4500,onTargetClick:s=>this.banChatter(s),onComplete:()=>this.handleSuccess(),onTimeout:()=>this.timeout()});this.addMechanic(t);for(let s=0;s<this.requiredBans;s++){const i=e[s%e.length],c=this.eventArea.x+this.eventArea.width*i.x,r=this.eventArea.y+this.eventArea.height*i.y,a=this.scene.add.container(c,r);this.trackElement(a),this.chatters.push(a);const n=this.scene.add.graphics();n.fillStyle(16777215,1),n.fillRoundedRect(-35,-15,70,30,10),n.lineStyle(2,0),n.strokeRoundedRect(-35,-15,70,30,10),a.add(n);const l=["git gud","trash game","boring","L stream","0/10","uninstall","cringe"],g=this.scene.add.text(0,0,Phaser.Utils.Array.GetRandom(l),{fontSize:"7px",color:"#000000",fontFamily:"Arial"}).setOrigin(.5);a.add(g);const d=this.scene.add.text(c,r-25,"ðŸ”¨",{fontSize:"18px"}).setOrigin(.5);this.trackElement(d);const o=t.createTarget(c,r-25,d,{hoverScale:1.2});o.container=a,o.chatterIndex=s,a.hammer=o,this.scene.tweens.add({targets:a,y:r+Phaser.Math.Between(-3,3),duration:1e3+s*100,repeat:-1,yoyo:!0,ease:"Sine.easeInOut"})}t.start()}showIntroAnimation(){this.chatters.forEach((t,s)=>{t.setAlpha(0),t.setScale(0),this.scene.tweens.add({targets:t,alpha:1,scale:1,duration:300,delay:s*100,ease:"Back.easeOut"})});const e=this.scene.add.text(this.eventArea.x+this.eventArea.width/2,this.eventArea.y+this.eventArea.height-30,"Chat getting toxic! Time to moderate!",{...h.TEXT_STYLES.MICRO,color:"#FF0000"}).setOrigin(.5).setAlpha(0);this.trackElement(e),this.scene.tweens.add({targets:e,alpha:[0,1,1,0],duration:2e3})}banChatter(e){if(!e||!e.container){console.error("Invalid hammer object:",e);return}const t=e.container;e&&typeof e.setPosition=="function"&&this.scene.tweens.add({targets:e,y:t.y,angle:45,scale:1.5,duration:200,ease:"Power2"});const s=this.scene.add.text(t.x,t.y-30,"BANNED!",{...h.TEXT_STYLES.UI_SMALL,color:"#FF0000",fontSize:"12px",stroke:"#000000",strokeThickness:2}).setOrigin(.5).setAlpha(0);this.trackElement(s),this.scene.tweens.add({targets:s,alpha:1,y:t.y-40,duration:300}),this.scene.tweens.add({targets:t,alpha:0,scale:0,duration:300,delay:200,ease:"Power2.easeIn"}),this.bannedCount++,this.progressText.setText(`Banned: ${this.bannedCount} / ${this.requiredBans}`),this.playSound("ban_hammer",{volume:.5}),this.scene.bottomBar&&this.scene.bottomBar.addBan&&this.scene.bottomBar.addBan(),this.scene.chatManager&&this.bannedCount===1&&this.scene.chatManager.addSystemMessage("Moderator is swinging the ban hammer!",this.config.color)}handleSuccess(){const e=this.scene.add.text(this.eventArea.x+this.eventArea.width/2,this.eventArea.y+this.eventArea.height/2,"CHAT CLEANED!",{...h.TEXT_STYLES.UI_SMALL,color:"#00FF00",fontSize:"16px",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setAlpha(0).setScale(0);this.trackElement(e),this.scene.tweens.add({targets:e,alpha:1,scale:[0,1.5,1],duration:500,ease:"Back.easeOut"});const t=["Great stream!","Love the content","You got this!","PogChamp"];for(let s=0;s<3;s++)this.scene.time.delayedCall(200+s*100,()=>{const i=this.scene.add.text(this.eventArea.x+this.eventArea.width*(.2+Math.random()*.6),this.eventArea.y+this.eventArea.height*(.3+Math.random()*.4),Phaser.Utils.Array.GetRandom(t),{fontSize:"8px",color:"#00FF00"}).setOrigin(.5);this.scene.tweens.add({targets:i,y:i.y-20,alpha:0,duration:1e3,onComplete:()=>i.destroy()})});this.scene.chatManager&&this.scene.chatManager.addSystemMessage("Chat has been cleaned up! Positive vibes only!","#00FF00"),this.scene.events.emit("ban:complete",this.requiredBans),this.scene.time.delayedCall(1e3,()=>this.success())}static getMetadata(){return{id:"ban-chatters",name:"Ban Chatters",description:"Click ban hammers to moderate toxic chatters",difficulty:1,category:"click",mechanics:["click-target"],estimatedDuration:5e3,author:"PirateSoftware",tags:["moderation","chat","ban","toxic"]}}}export{S as BanChattersMinigame};
