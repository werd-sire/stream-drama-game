import{C as o,P as s}from"./index-c0fuZDJO.js";import{B as w}from"./base-event-BLT1_Wdv.js";class f extends w{constructor(e,i,n){super(e,i,n),this.petitionsKilled=0,this.goodPetitionsClicked=0,this.petitions=[],this.isCompleted=!1,this.badPetitions=[{title:`STOP
KILLING
GAMES`,subtitle:"(click me!)"},{title:"SKG",subtitle:"(destroy!)"},{title:"S.K.G.",subtitle:"(kill it!)"},{title:`STOP
KILLING
GAMES!`,subtitle:"(click!)"},{title:"#SKG",subtitle:"(destroy!)"},{title:`StopKilling
Games`,subtitle:"(click me!)"}],this.goodPetitions=[{title:`STOP
FUR
TRADE`,subtitle:"(KEEP!)",color:9498256},{title:`SAVE
THE
WHALES`,subtitle:"(GOOD!)",color:8900331},{title:`PLANT
MORE
TREES`,subtitle:"(NICE!)",color:10025880},{title:`FREE
HEALTHCARE`,subtitle:"(KEEP!)",color:16758465},{title:`CLEAN
OCEANS`,subtitle:"(GOOD!)",color:52945}],this.phishingPetitions=[{title:`CLICK FOR
FREE $$$`,subtitle:"(phishing!)",color:16739179},{title:`HOT SINGLES
IN AREA`,subtitle:"(spam!)",color:16738740},{title:`ENLARGE
YOUR...
VIEWERS`,subtitle:"(scam!)",color:16753920}]}start(){this.setupEventSpace(),this.createKillZone(),this.startPetitionSpawning()}setupEventSpace(){const e=this.scene.add.graphics();e.fillStyle(1710618,1),e.fillRect(this.eventArea.x,this.eventArea.y,this.eventArea.width,this.eventArea.height),e.lineStyle(3,parseInt(this.config.color.replace("#","0x")),1),e.strokeRect(this.eventArea.x,this.eventArea.y,this.eventArea.width,this.eventArea.height),this.trackElement(e);const i=this.scene.add.text(this.eventArea.x+this.eventArea.width/2,this.eventArea.y+15,"KILL THE BAD PETITIONS!",{...o.TEXT_STYLES.UI_SMALL,color:this.config.color}).setOrigin(.5);this.trackElement(i),this.progressText=this.scene.add.text(this.eventArea.x+this.eventArea.width/2,this.eventArea.y+this.eventArea.height-10,`Destroyed: 0 / ${this.config.petitionsToKill}`,{...o.TEXT_STYLES.MICRO}).setOrigin(.5),this.trackElement(this.progressText);const n=this.scene.add.text(this.eventArea.x+this.eventArea.width/2,this.eventArea.y+30,"Don't click the good ones!",{...o.TEXT_STYLES.MICRO,color:"#FFFF00"}).setOrigin(.5);this.trackElement(n)}createKillZone(){const e=this.scene.add.rectangle(this.eventArea.x+this.eventArea.width/2,this.eventArea.y+this.eventArea.height-40,80,40,6710886).setStrokeStyle(2,0);this.trackElement(e);const i=this.scene.add.text(this.eventArea.x+this.eventArea.width/2,this.eventArea.y+this.eventArea.height-40,"▼▼▼▼",{...o.TEXT_STYLES.UI_SMALL,color:"#333333"}).setOrigin(.5);this.trackElement(i),this.scene.tweens.add({targets:i,y:i.y+2,duration:200,repeat:-1,yoyo:!0})}startPetitionSpawning(){this.spawnTimer=this.scene.time.addEvent({delay:this.config.spawnRate,repeat:-1,callback:()=>{this.isCompleted||this.spawnPetition()}}),this.trackTimer(this.spawnTimer),this.spawnPetition()}spawnPetition(){if(this.isCompleted)return;const e=Math.random();let i,n,r,h;if(e<.3){const a=Math.random()>.5;i=a?this.eventArea.x-30:this.eventArea.x+this.eventArea.width+30,r=a?this.eventArea.x+this.eventArea.width+30:this.eventArea.x-30,n=h=s.Math.Between(this.eventArea.y+45,this.eventArea.y+this.eventArea.height-60)}else e<.6?(i=s.Math.Between(this.eventArea.x+30,this.eventArea.x+this.eventArea.width-30),r=i+s.Math.Between(-50,50),n=this.eventArea.y-30,h=this.eventArea.y+this.eventArea.height+30):(i=this.eventArea.x+this.eventArea.width/2+s.Math.Between(-30,30),n=this.eventArea.y+this.eventArea.height/2,r=s.Math.Between(this.eventArea.x+30,this.eventArea.x+this.eventArea.width-30),h=s.Math.Between(this.eventArea.y+45,this.eventArea.y+this.eventArea.height-60));const v=Math.random();let l,d=!0;v<.7?l=s.Utils.Array.GetRandom(this.badPetitions):v<.95?(l=s.Utils.Array.GetRandom(this.goodPetitions),d=!1):l=s.Utils.Array.GetRandom(this.phishingPetitions);const t=this.scene.add.container(i,n);t.isBad=d;const p=l.color||(d?16775388:9498256),g=this.scene.add.rectangle(2,2,70,50,0,.3);t.add(g);const c=this.scene.add.rectangle(0,0,70,50,p).setStrokeStyle(2,0);t.add(c);const E=this.scene.add.polygon(25,-20,[0,0,10,0,10,10],p).setStrokeStyle(1,0);t.add(E);const m=this.scene.add.text(0,-8,l.title,{fontSize:"7px",color:"#000000",align:"center",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5);t.add(m);const x=this.scene.add.text(0,15,l.subtitle,{fontSize:"6px",color:d?"#FF0000":"#006400",align:"center",fontFamily:"Arial"}).setOrigin(.5);t.add(x);for(let a=0;a<3;a++){const y=this.scene.add.rectangle(-20+a*2,22+a*3,35-a*5,1,6710886);t.add(y)}c.setInteractive({useHandCursor:!0}),this.petitions.push(t),this.trackElement(t);let A;e>=.6?(t.setScale(.1),A=this.scene.tweens.add({targets:t,x:r,y:h,scale:1,angle:s.Math.Between(-30,30),duration:2e3,ease:"Quad.easeOut",onComplete:()=>{this.scene.tweens.add({targets:t,x:t.x+s.Math.Between(-20,20),y:t.y+s.Math.Between(-10,10),duration:2e3,repeat:-1,yoyo:!0,ease:"Sine.easeInOut"})}})):(A=this.scene.tweens.add({targets:t,x:r,y:h,duration:3500,ease:"Linear",onComplete:()=>{const a=this.petitions.indexOf(t);a>-1&&(this.petitions.splice(a,1),d&&this.showFeedback("ESCAPED!",t.x,t.y,"#FF0000")),t.destroy()}}),this.scene.tweens.add({targets:t,angle:s.Math.Between(-15,15),duration:2e3,repeat:-1,yoyo:!0,ease:"Sine.easeInOut"})),t.moveTween=A,this.trackTween(A),c.on("pointerdown",()=>{this.isCompleted||this.clickPetition(t)}),c.on("pointerover",()=>{this.scene.tweens.add({targets:t,scale:1.1,duration:100})}),c.on("pointerout",()=>{this.scene.tweens.add({targets:t,scale:1,duration:100})})}clickPetition(e){if(this.isCompleted)return;e.moveTween&&e.moveTween.stop();const i=this.petitions.indexOf(e);i>-1&&this.petitions.splice(i,1),e.isBad?(this.scene.tweens.add({targets:e,y:this.eventArea.y+this.eventArea.height-40,angle:720,scale:0,duration:500,ease:"Power2",onComplete:()=>e.destroy()}),this.petitionsKilled++,this.progressText.setText(`Destroyed: ${this.petitionsKilled} / ${this.config.petitionsToKill}`),this.showFeedback("SHREDDED!",e.x,e.y,"#00FF00"),this.petitionsKilled>=this.config.petitionsToKill&&this.completeEvent()):(this.goodPetitionsClicked++,this.showFeedback("NO! THAT WAS GOOD!",e.x,e.y,"#FF0000"),this.scene.tweens.add({targets:e,x:e.x+s.Math.Between(-10,10),y:e.y+s.Math.Between(-10,10),scale:0,alpha:0,duration:500,repeat:3,onComplete:()=>e.destroy()}),this.eventManager&&this.eventManager.gameScene&&this.eventManager.gameScene.addViewers(-5))}showFeedback(e,i,n,r){const h=this.scene.add.text(i,n,e,{fontSize:"10px",fontFamily:'"Press Start 2P"',color:r,stroke:"#000000",strokeThickness:3}).setOrigin(.5);this.trackElement(h),this.scene.tweens.add({targets:h,y:n-30,alpha:0,duration:1e3,onComplete:()=>h.destroy()})}timeout(){if(this.isCompleted)return;this.isCompleted=!0,this.spawnTimer&&this.spawnTimer.remove(),this.petitions.forEach(i=>{i.moveTween&&i.moveTween.stop(),i.destroy()}),this.petitions=[];const e=this.scene.add.text(this.eventArea.x+this.eventArea.width/2,this.eventArea.y+this.eventArea.height/2,`TIME'S UP! Only destroyed ${this.petitionsKilled}/${this.config.petitionsToKill}!`,{...o.TEXT_STYLES.UI_SMALL,color:"#FF0000"}).setOrigin(.5);this.trackElement(e),this.scene.time.delayedCall(1500,()=>{e.destroy(),this.fail()})}completeEvent(){if(this.isCompleted=!0,this.spawnTimer&&this.spawnTimer.remove(),this.petitions.forEach(e=>{e.moveTween&&e.moveTween.stop(),e.destroy()}),this.petitions=[],this.goodPetitionsClicked>0){const e=this.scene.add.text(this.eventArea.x+this.eventArea.width/2,this.eventArea.y+this.eventArea.height/2,`You destroyed ${this.goodPetitionsClicked} good petitions!`,{...o.TEXT_STYLES.UI_SMALL,color:"#FF0000"}).setOrigin(.5);this.trackElement(e),this.scene.time.delayedCall(2e3,()=>{e.destroy(),this.success()})}else{const e=this.scene.add.text(this.eventArea.x+this.eventArea.width/2,this.eventArea.y+this.eventArea.height/2,"PERFECT! No good petitions harmed!",{...o.TEXT_STYLES.UI_SMALL,color:"#00FF00"}).setOrigin(.5);this.trackElement(e),this.eventManager&&this.eventManager.gameScene&&this.eventManager.gameScene.addViewers(10),this.scene.time.delayedCall(1500,()=>{e.destroy(),this.success()})}}cleanup(){this.isCompleted=!0,super.cleanup()}}export{f as KillPetitionsEvent};
