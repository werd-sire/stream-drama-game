import{P as s,C as t,U as c,s as d}from"./index-c0fuZDJO.js";class u extends s.Scene{constructor(){super({key:"GameOver"})}init(e){this.finalScore=e.score||0,this.streamTime=e.streamTime||0,this.hardCoreMode=e.hardCoreMode||!1}create(){this.soundManager=this.registry.get("soundManager"),this.soundManager||console.warn("Sound manager not found in registry"),this.add.rectangle(0,0,t.WIDTH,t.HEIGHT,0).setOrigin(0),this.createDramaticEffect();const e=this.add.text(t.WIDTH/2,40,"STREAM ENDED",{...t.TEXT_STYLES.TITLE,color:"#FF0000"}).setOrigin(.5).setAlpha(0);this.tweens.add({targets:e,alpha:1,scale:{from:2,to:1},duration:1e3,ease:"Power2"});const a=this.add.text(t.WIDTH/2,75,"Thor has arrived...",{...t.TEXT_STYLES.UI,color:t.COLORS.FERRET}).setOrigin(.5).setAlpha(0);this.time.delayedCall(1e3,()=>{this.tweens.add({targets:a,alpha:1,duration:2e3,ease:"Power2"})}),this.createStatsDisplay(),this.time.delayedCall(2500,()=>{this.createButtons()}),this.createFloatingRoaches(),this.createStaticNoise(),this.time.addEvent({delay:3e3,loop:!0,callback:()=>this.createGlitchEffect()})}createDramaticEffect(){const e=this.add.graphics();e.setAlpha(.6);const a=t.WIDTH/2,r=t.HEIGHT/2,o=Math.max(t.WIDTH,t.HEIGHT);for(let i=10;i>=0;i--){const n=o/10*i,h=1-i/10;e.fillStyle(9109504,h),e.fillCircle(a,r,n)}this.tweens.add({targets:e,alpha:[.3,.6],duration:2e3,repeat:-1,yoyo:!0,ease:"Sine.easeInOut"}),this.time.addEvent({delay:s.Math.Between(4e3,8e3),loop:!0,callback:()=>{const i=this.add.rectangle(0,0,t.WIDTH,t.HEIGHT,16777215,.8).setOrigin(0).setDepth(100);this.tweens.add({targets:i,alpha:0,duration:200,onComplete:()=>i.destroy()}),c.addScreenShake(this,3,100)}})}createStatsDisplay(){const a=[],r=this.add.text(t.WIDTH/2,105,`Final Score: ${c.formatNumber(this.finalScore)}`,t.TEXT_STYLES.MENU).setOrigin(.5).setAlpha(0);a.push(r);const o=Math.floor(this.streamTime/60),i=this.streamTime%60,n=this.add.text(t.WIDTH/2,130,`Stream lasted: ${o}m ${i}s`,{...t.TEXT_STYLES.UI,fontSize:t.TEXT_STYLES.UI.fontSize}).setOrigin(.5).setAlpha(0);a.push(n);const h=this.getPerformanceRating(),T=this.add.text(t.WIDTH/2,155,h.text,{...t.TEXT_STYLES.UI,color:h.color,fontSize:t.TEXT_STYLES.UI.fontSize}).setOrigin(.5).setAlpha(0);a.push(T);const m=o>0?Math.floor(this.finalScore/o):this.finalScore,S=this.add.text(t.WIDTH/2,175,`${m} viewers/min average`,{...t.TEXT_STYLES.MENU_SMALL,color:"#888888"}).setOrigin(.5).setAlpha(0);a.push(S),a.forEach((l,E)=>{this.time.delayedCall(1500+E*200,()=>{this.tweens.add({targets:l,alpha:1,y:l.y-10,duration:500,ease:"Power2"})})}),this.finalScore>=1e3&&this.time.delayedCall(2500,()=>{c.createParticleBurst(this,t.WIDTH/2,105,16766720,20)})}createButtons(){const e=c.createButton(this,t.WIDTH/2,190,"GO AGANE",()=>{this.cameras.main.fadeOut(500),this.time.delayedCall(500,async()=>{try{await d("Game",{hardCoreMode:this.hardCoreMode})}catch(r){console.error("Failed to start Game scene:",r)}})});e.setAlpha(0),e.y+=20;const a=c.createButton(this,t.WIDTH/2,220,"MAIN MENU",()=>{this.cameras.main.fadeOut(500),this.time.delayedCall(500,async()=>{try{await d("Menu")}catch(r){console.error("Failed to start Menu scene:",r)}})});a.setAlpha(0),a.y+=20,this.tweens.add({targets:[e,a],alpha:1,y:"-=20",duration:500,delay:this.tweens.stagger(100)})}getPerformanceRating(){const e=[{score:2e3,text:"GODLIKE STREAMER!",color:"#FF00FF"},{score:1e3,text:"LEGENDARY STREAMER!",color:t.COLORS.PRIMARY},{score:500,text:"Professional Streamer",color:t.COLORS.ACCENT},{score:250,text:"Decent Stream",color:"#00FF00"},{score:100,text:"Amateur Hour",color:"#FFFFFF"},{score:0,text:"Skill Issue Detected",color:"#FF0000"}];for(const a of e)if(this.finalScore>=a.score)return a;return e[e.length-1]}createFloatingRoaches(){for(let e=0;e<5;e++){const a=this.add.text(s.Math.Between(20,t.WIDTH-20),t.HEIGHT+20,"ðŸª³",{fontSize:"16px"}).setDepth(50);a.setRotation(s.Math.Between(-30,30)*Math.PI/180),this.tweens.add({targets:a,y:-20,x:a.x+s.Math.Between(-50,50),angle:s.Math.Between(-180,180),duration:s.Math.Between(5e3,8e3),delay:e*500,repeat:-1,onRepeat:()=>{a.x=s.Math.Between(20,t.WIDTH-20),a.y=t.HEIGHT+20}})}}createStaticNoise(){const e=this.add.graphics().setAlpha(.1);this.time.addEvent({delay:50,loop:!0,callback:()=>{e.clear();for(let a=0;a<50;a++){const r=s.Math.Between(0,t.WIDTH),o=s.Math.Between(0,t.HEIGHT),i=s.Math.Between(1,3),n=Math.random()>.5?16777215:0;e.fillStyle(n,Math.random()),e.fillRect(r,o,i,i)}}})}createGlitchEffect(){const e=this.add.container(0,0).setDepth(200);for(let a=0;a<5;a++){const r=this.add.rectangle(0,s.Math.Between(0,t.HEIGHT),t.WIDTH,s.Math.Between(2,10),s.Utils.Array.GetRandom([16711680,65280,255]),.5).setOrigin(0);e.add(r),this.tweens.add({targets:r,x:[0,s.Math.Between(-10,10),0],duration:100,repeat:2})}this.time.delayedCall(300,()=>{e.destroy()})}}export{u as GameOverScene};
